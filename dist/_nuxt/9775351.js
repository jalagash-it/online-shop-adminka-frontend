(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{316:function(e,t,n){"use strict";n.r(t);n(111),n(22),n(37);var r=n(130),l={data:function(){return{nameState:null,catState:null,priceState:null,coveringState:null,depthState:null,widthState:null,heightState:null,wave_widthState:null,wave_heightState:null,guaranteeState:null,showAddModal:!1,newItem:{name:"",price:0},fields:[{key:"name",label:"Название",sortable:!0},{key:"category_id",label:"Категория",sortable:!0},{key:"price",label:"Цена",sortable:!0},{key:"covering",label:"Покрытие",sortable:!0},{key:"depth",label:"Толщина",sortable:!0},{key:"width",label:"Ширина",sortable:!0},{key:"height",label:"Длина",sortable:!0},{key:"wave_width",label:"Ширина волны",sortable:!0},{key:"wave_height",label:"Высота волны",sortable:!0},{key:"guarantee",label:"Гарантие"}],items:[]}},mounted:function(){window.test=this;var e=this;this.$store.dispatch("categories/all"),this.$axios.$get("/products").then((function(t){e.items=t}))},methods:{checkFormValidity:function(){var e=this.$refs.form.checkValidity();return this.nameState=e,e},resetModal:function(){this.newItem.name="",this.newItem.price=0,this.nameState=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(){var e=this;this.checkFormValidity()&&this.$axios.$post("/products",this.newItem).then(console.log).then((function(){e.$nextTick((function(){e.$bvModal.hide("add-modal")}))}))},getCategoryName:function(e){var t=test.categoryOptions.find((function(t){return t.value==e}));return null!=t?t.text:"Нет категории"}},computed:{categories:function(){return this.$store.state.categories.tree},categoryOptions:function(){var e=this.$store.state.categories.tree;return null!=e?Object(r.d)(e).map((function(e){return{value:e.id,text:e.name}})):[]}}},o=n(82),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Товары")]),e._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-modal",modifiers:{"add-modal":!0}}],staticStyle:{"margin-bottom":"8px"}},[e._v("+")]),e._v(" "),n("b-table",{attrs:{fields:e.fields,items:e.items},scopedSlots:e._u([{key:"cell(category_id)",fn:function(data){return[n("b",{staticClass:"text-info"},[e._v(e._s(e.getCategoryName(data.item.category_id)))])]}}])}),e._v(" "),n("b-modal",{ref:"modal",attrs:{id:"add-modal",title:"Добавить новый товар"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk}},[n("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[n("b-form-group",{attrs:{label:"Название","label-for":"name-input","invalid-feedback":"Обязательное поле",state:e.nameState}},[n("b-form-input",{attrs:{id:"name-input",state:e.nameState,required:""},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Категория","label-for":"category_id","invalid-feedback":"Обязательное поле",state:e.catState}},[n("b-form-select",{attrs:{options:e.categoryOptions},model:{value:e.newItem.category_id,callback:function(t){e.$set(e.newItem,"category_id",t)},expression:"newItem.category_id"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Цена","label-for":"price-input","invalid-feedback":"Обязательное поле",state:e.priceState}},[n("b-form-input",{attrs:{id:"price-input",state:e.priceState,required:""},model:{value:e.newItem.price,callback:function(t){e.$set(e.newItem,"price",t)},expression:"newItem.price"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Покрытие","label-for":"covering","invalid-feedback":"Обязательное поле",state:e.coveringState}},[n("b-form-input",{attrs:{id:"covering",state:e.coveringState,required:""},model:{value:e.newItem.covering,callback:function(t){e.$set(e.newItem,"covering",t)},expression:"newItem.covering"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Толщина","label-for":"depth","invalid-feedback":"Обязательное поле",state:e.depthState}},[n("b-form-input",{attrs:{id:"depth",state:e.depthState,required:""},model:{value:e.newItem.depth,callback:function(t){e.$set(e.newItem,"depth",t)},expression:"newItem.depth"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Ширина","label-for":"width","invalid-feedback":"Обязательное поле",state:e.widthState}},[n("b-form-input",{attrs:{id:"width",state:e.widthState,required:""},model:{value:e.newItem.width,callback:function(t){e.$set(e.newItem,"width",t)},expression:"newItem.width"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Длина","label-for":"height","invalid-feedback":"Обязательное поле",state:e.heightState}},[n("b-form-input",{attrs:{id:"height",state:e.heightState,required:""},model:{value:e.newItem.height,callback:function(t){e.$set(e.newItem,"height",t)},expression:"newItem.height"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Ширина волны","label-for":"wave_width","invalid-feedback":"Обязательное поле",state:e.wave_widthState}},[n("b-form-input",{attrs:{id:"wave_width",state:e.wave_widthState,required:""},model:{value:e.newItem.wave_width,callback:function(t){e.$set(e.newItem,"wave_width",t)},expression:"newItem.wave_width"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Высота волны","label-for":"wave_height","invalid-feedback":"Обязательное поле",state:e.wave_heightState}},[n("b-form-input",{attrs:{id:"wave_height",state:e.wave_heightState,required:""},model:{value:e.newItem.wave_height,callback:function(t){e.$set(e.newItem,"wave_height",t)},expression:"newItem.wave_height"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Гарантие","label-for":"guarantee","invalid-feedback":"Обязательное поле",state:e.guaranteeState}},[n("b-form-input",{attrs:{id:"guarantee",state:e.guaranteeState,required:""},model:{value:e.newItem.guarantee,callback:function(t){e.$set(e.newItem,"guarantee",t)},expression:"newItem.guarantee"}})],1)],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);